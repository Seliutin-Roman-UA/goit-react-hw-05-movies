"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[205],{845:function(e,a,n){n.d(a,{a:function(){return _}});var t=n(731),r=n(689),i="MovieGallery_gallery__Oyx2w",s="MovieGallery_movieCard__EGmQT",c="MovieGallery_movieLink__I3PNV",l="MovieGallery_movieImg__4HExA",o="MovieGallery_movieCaption__zkqUS",u=n(184);function _(e){var a=e.movies,n=(0,r.TH)();return(0,u.jsx)("ul",{className:i,children:a.map((function(e){var a=e.id,r=e.title,i=e.poster,_=e.date;return(0,u.jsx)("li",{className:s,children:(0,u.jsxs)(t.rU,{to:"/movies/".concat(a),state:n,className:c,children:[(0,u.jsx)("img",{className:l,src:"https://image.tmdb.org/t/p/w185".concat(i),alt:""}),(0,u.jsx)("p",{className:o,children:r}),(0,u.jsx)("p",{className:o,children:null===_||void 0===_?void 0:_.slice(0,4)})]})},a)}))})}},205:function(e,a,n){n.r(a),n.d(a,{MoviesPage:function(){return m},default:function(){return d}});var t=n(885),r=n(791),i=n(845),s=n(731),c="MoviesPage_searchForm__7gk5Y",l="MoviesPage_formButton__QaKo6",o=n(322),u=n(835),_=n(184);function m(){var e=(0,r.useState)([]),a=(0,t.Z)(e,2),n=a[0],m=a[1],d=(0,r.useState)(!1),p=(0,t.Z)(d,2),f=p[0],g=p[1],v=(0,s.lr)(),h=(0,t.Z)(v,2),x=h[0],j=h[1],N=x.get("query"),y=x.get("page")?Number(x.get("page")):1,k=(0,r.useRef)(1);return(0,r.useEffect)((function(){N&&(g(!0),fetch("https://api.themoviedb.org/3/search/movie?api_key=09fddff29ca445d38e447ae99342142f&query=".concat(N,"&page=").concat(y)).then((function(e){return e.json()})).then((function(e){k.current=e.total_pages,m(e.results.map((function(e){return{id:e.id,date:e.release_date,title:e.title,poster:e.poster_path}})))})).catch((function(e){return console.log("shit happens",e)})).finally((function(){return g(!1)})))}),[N,y]),(0,_.jsxs)("div",{children:[(0,_.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a,n=e.currentTarget.elements.query.value;""!==n?a={page:1,query:n}:(m([]),a={}),j(a),e.currentTarget.elements.query.value=""},className:c,children:[(0,_.jsx)("input",{type:"text",name:"query"}),(0,_.jsx)("button",{type:"Submit",className:l,children:"Search"})]}),N?!n.length&&(0,_.jsx)("p",{children:"Search result is empty"}):(0,_.jsx)("p",{children:"Enter the search string"}),(0,_.jsx)(i.a,{movies:n}),n.length>1&&(0,_.jsx)(u.t,{max:k.current,callback:function(e){j({page:y+e,query:N})},currentPage:y}),f&&(0,_.jsx)(o.i,{})]})}var d=m},835:function(e,a,n){n.d(a,{t:function(){return _}});var t=n(791),r=n(651),i="Pagination_wrapper__CdeaB",s="Pagination_pagination__vcNDC",c="Pagination_pagIcon__Wvimy",l="Pagination_pagPage__EU6Ae",o="Pagination_pagInput__OLhra",u=n(184);function _(e){var a=e.max,n=void 0===a?1:a,_=e.callback,m=e.currentPage,d=(0,t.useRef)();(0,t.useEffect)((function(){d.current.focus()}),[]);var p=function(e){var a;(a="SPAN"===e.currentTarget.nodeName?e.currentTarget.textContent:e.currentTarget.value)>n||a<1||_(a-m)};return(0,u.jsx)("div",{className:i,children:(0,u.jsxs)("div",{className:s,children:[(0,u.jsx)("span",{className:l,onClick:function(){m-1<1||_(-1)},children:(0,u.jsx)(r.gfl,{className:c})}),(0,u.jsx)("span",{className:l,onClick:p,children:"1"}),(0,u.jsx)("input",{type:"text",value:m,onChange:p,ref:d,className:o}),(0,u.jsx)("span",{className:l,onClick:p,children:n}),(0,u.jsx)("span",{className:l,onClick:function(){m+1>n||_(1)},children:(0,u.jsx)(r.KT4,{className:c})})]})})}},322:function(e,a,n){n.d(a,{i:function(){return l}});n(791);var t=n.p+"static/media/film_.edec29a5e5d0c99737260c630eab0f72.svg",r="Spiner_backDrop__tSBdE",i="Spiner_modal__GF9zM",s="Spiner_img__KhcjE",c=n(184);function l(){return(0,c.jsx)("div",{className:r,children:(0,c.jsx)("div",{className:i,children:(0,c.jsx)("img",{src:t,alt:"",className:s})})})}}}]);
//# sourceMappingURL=205.67476965.chunk.js.map